<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Harpagon Template</title>
	<style>
		{% include "./styles.css" %}
	</style>
</head>
	<body class="invoice">
		<div class="main-container">
			<div class="header">
				<div class="sender">
					<p class="sender__name label">{{ _config.name | safe | nl2br }}</p>
					<p class="sender__address">
						{{ _config.address | safe | nl2br }}
					</p>
				</div>

				<div class="client">
					<p class="label">Adresse de livraison</p>

					<p class="client__address">
						{{ client.address | striptags(true) | escape | nl2br }}
					</p>

					{% if client.billingAddress %}
						<p class="label">Adresse de facturation</p>
						<p class="client__billing-address">
							{{ client.billingAddress | striptags(true) | escape | nl2br }}
						</p>
					{% endif %}
				</div>
			</div>

			<h1 class="main-title margin-top">Facture n<sup>o</sup> {{ invoice.id }}</h1>
			
			<table class="informations">
				<tbody>
					<tr>
						<td>Prestation</td>
						<td>{{ title }}</td>
					</tr>
					<tr>
						<td>Date d'émission</td>
						<td>{{ invoice.date }}</td>
					</tr>
					<tr>
						<td>Date de livraison</td>
						<td>{{ invoice.deliveryDate }}</td>
					</tr>
					<tr>
						<td>Payable à réception.</td>
						<td></td>
					</tr>
				</tbody>
			</table>

			<table class="items margin-top">
				<thead class="color">
					<tr>
						<th>Description</th>
						<th>PU&nbsp;HT*</th>
						<th>Quantit&eacute;</th>
						<th>Prix&nbsp;HT*</th>
					</tr>
				</thead>
				<tbody>
					{% set invoiceTotal = 0 %}
					{% for item in items %}
						<tr>
							<td class="item-info">
								<p class="item-name">{{ item.name }}</p>
								{% if item.description %}
									<p class="item-description">{{ item.description }}</p>
								{% endif %}
							</td>
							<td class="item-unit-price">
								{{ item.unitPrice }}&nbsp;&euro;
							</td>
							<td class="item-quantity">
								{{ item.quantity }}
							</td>
							<td class="item-total-price">
								{% set itemTotal = item.unitPrice * item.quantity %}
								{% set invoiceTotal = invoiceTotal + itemTotal %}
								{{ itemTotal }}&nbsp;&euro;
							</td>
						</tr>
					{% endfor %}
				</tbody>
				<tfoot>
					<tr>
						<td colspan="2"></td>
						<td>
							<p class="color">Total&nbsp;HT*</p>
						</td>
						<td>
							<p class="total">{{ invoiceTotal }}&nbsp;&euro;</p>
						</td>
					</tr>
				</tfoot>
			</table>

			{% if _config.bank %}
				<div class="bank-section margin-top">
					<p class="label">Coordonnées bancaires</p>
					<p class="bank">
						{{ _config.bank | striptags(true) | escape | nl2br }}
					</p>
				</div>
			{% endif %}

			{% if _config.footer %}
				<p class="footer margin-top">
					{{ _config.footer | striptags(true) | escape | nl2br }}
				</p>
			{% endif %}
		</div>
	</body>
</html>